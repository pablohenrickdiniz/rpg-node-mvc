var paths=require("rpg-node-mvc").paths,database_config=require(paths.APP_ROOT+"/config/app").database,mongoose=require("mongoose");module.exports={conn:[],get:function(d){var a=this;if(a.conn[d]==undefined){if(database_config[d]!=undefined){var b=database_config[d];var c=["mongodb://",b.host,"/",b.database,":",b.port].join("");a.conn[d]=mongoose.createConnection(c,{user:b.user,pass:b.pass,db:b.db,server:b.server,replset:b.replset})}else{throw new Error("Database connection "+d+" not defined")}}return a.conn[d]}};