var paths=require("../config/paths"),database_config=require(paths.APP_ROOT+"/config/app").database,mongoose=require("mongoose");module.exports={conn:[],get:function(d){var a=this;if(a.conn[d]==undefined){if(database_config[d]!=undefined){var b=database_config[d];var c=["mongodb://",b.host,":",b.port,"/",b.database].join("");console.log("connection mongo database in "+c+"...");a.conn[d]=mongoose.createConnection(c,{user:b.user,pass:b.pass,server:b.server,replset:b.replset,db:b.db});console.log("database "+b.database+" connected!")}else{throw new Error("Database connection "+d+" not defined")}}return a.conn[d]}};